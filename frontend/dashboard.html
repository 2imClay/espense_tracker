<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard - Quแบฃn lรฝ chi tiรชu</title>
  <link rel="stylesheet" href="/frontend/css/style.css">
  <script defer src="/frontend/js/dashboard.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-start text-black dark:bg-gray-800 dark:text-white relative">

  <div class="top-bar">
    <button onclick="toggleTheme()" class="top-button" id="themeButton">
      ๐ Chแบฟ ฤแป
    </button>
    
    <div class="spacer"></div> <!-- spacer ฤแบฉy cรกc nรบt ra phแบฃi -->
  
    <button onclick="toggleSettings()" class="top-button" id="settingsButton">
      โ๏ธ Cรi ฤแบทt
    </button>
  </div>
  <!-- Thรชm khung menu Cรi ฤแบทt -->
  <div id="settingsMenu" class="settings-menu hidden">
    <button onclick="openProfile()" class="settings-item">๐ค Thรดng tin cรก nhรขn</button>
    <button onclick="openGoals()" class="settings-item">๐ฏ ฤแบทt mแปฅc tiรชu chi tiรชu</button>
    <button onclick="confirmLogout()" class="settings-item">๐ช ฤฤng xuแบฅt</button>
    <button onclick="deleteAllData()" class="settings-item">๐๏ธ Xรณa toรn bแป dแปฏ liแปu</button>
    <button onclick="deleteAccount()" class="settings-item">โ Xรณa tรi khoแบฃn</button>
  </div>
  
  <!-- Modal ฤแบทt mแปฅc tiรชu -->
  <div id="goalsModal" class="modal">
    <div class="modal-content grid md:grid-cols-2 gap-6 max-h-[90vh] overflow-hidden">
      
      <!-- Bรชn trรกi: Form nhแบญp mแปฅc tiรชu -->
      <div class="flex flex-col">
        <h2 class="text-2xl font-bold mb-6">ฤแบทt mแปฅc tiรชu chi tiรชu</h2>

        <label class="block mb-2 font-semibold">Tรชn loแบกi chi tiรชu:</label>
        <input id="goalCategoryName" type="text" placeholder="VD: ฤn uแปng" class="input mb-4" />

        <label class="block mb-2 font-semibold">Sแป tiแปn mแปฅc tiรชu:</label>
        <input id="goalCategoryAmount" type="number" placeholder="VD: 5000000" class="input mb-6" />

        <button onclick="addGoalCategory()" class="button mb-4">โ Thรชm loแบกi mแปฅc tiรชu</button>

        <button onclick="closeGoals()" class="button mt-auto">ฤรณng</button>
      </div>

      <!-- Bรชn phแบฃi: Danh sรกch loแบกi mแปฅc tiรชu -->
      <div class="flex flex-col overflow-y-auto max-h-[70vh] pr-2">
        <h3 class="text-xl font-semibold mb-4">Danh sรกch loแบกi mแปฅc tiรชu:</h3>
        <div id="goalList" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div> <!-- 2 cแปt chia ฤแบนp -->
      </div>
    </div>
  </div>





  <h1 id="welcome" class="text-3xl font-bold my-8 text-center">Xin chรo!</h1>

  <div class="dashboard-container">
    <div class="rowContent1 flex flex-row gap-6">
      <div class="left-panel w-full md:w-[48%]">
        <div class="p-6 mb-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg">
          <h2 class="text-2xl font-bold mb-4">๐ฐ Thiแบฟt lแบญp tแปng tiแปn ฤแบงu thรกng</h2>
        
          <div class="mb-4">
          <label class="font-semibold mb-2 block">Chแปn thรกng:</label>
          <input id="budgetMonth" type="month" class="input mb-4" />
          </div>

          <div class="mb-4">
          <label class="font-semibold mb-2 block">Tแปng tiแปn ฤแบงu thรกng:</label>
          <input id="totalBudget" type="number" placeholder="VD: 10000000" class="input mb-6" />
          </div>

          <button onclick="saveBudget()" class="button w-full">Lฦฐu tแปng tiแปn</button>
        </div>
        
        <div class="p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg">
          <h2 class="text-2xl font-bold mb-4">๐ Thรชm khoแบฃn chi tiรชu</h2>

          <div class="mb-4">
            <label for="expenseName" class="block font-semibold mb-2">Tรชn khoแบฃn chi tiแบฟt:</label>
            <input id="expenseName" type="text" placeholder="VD: ฤn cฦกm gร" class="input" />
          </div>
          
          <div class="mb-4">
            <label for="expenseCategory" class="block font-semibold mb-2">Phรขn loแบกi:</label>
            <select id="expenseCategory" class="input select"></select>
          </div>
          
          <div class="mb-6">
            <label for="expenseAmount" class="block font-semibold mb-2">Sแป tiแปn:</label>
            <input id="expenseAmount" type="number" placeholder="VD: 500000" class="input" />
          </div>        
        
          <button onclick="addExpense()" class="button w-full">Thรชm khoแบฃn chi</button>
        </div>
        
        
      </div>

      <div class="right-panel w-full md:w-[48%]">
        <h2 class="text-2xl font-bold mb-4">Danh sรกch theo thรกng</h2>
        <div id="monthList" class="space-y-4"></div>
      </div>
    </div>
    <!-- Panel Thแปng kรช -->
    <div class="rowContent2 w-full">
      <div class="statistics-panel p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg">
        <h2 class="text-2xl font-bold mb-4">๐ Thแปng kรช chi tiรชu</h2>
        <div class="chart-container flex justify-center items-center w-full">
          <div style="width: 300px; max-width: 100%;">
            <canvas id="expensesChart"></canvas>
          </div>
        </div>
             
      
      </div>
    </div>
    
  </div>

  <div id="profileModal" class="profileModal">
    <div class="profileModal-content">
      <h2 class="text-2xl font-bold mb-4">Thรดng tin cรก nhรขn</h2>
      <p id="profileUsername" class="mb-2"></p>
      <p id="profileEmail" class="mb-4"></p>
      <button onclick="closeProfile()" class="button">ฤรณng</button>
    </div>
  </div>

</body>
</html>
